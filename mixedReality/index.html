<!-- Godel's bulldog logo: start with line inside circle, go to circle inside line -->

<html>
	<head>
		<title>a</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {
				margin: 0px;
				overflow: hidden;
			}
		</style>
	</head>
	<body>
		<script src="lib/three.js"></script>
		<script src="lib/sceneUtils.js"></script>

		<script src="lib/OBJLoader.js"></script>
		<script src="lib/GLTFLoader.js"></script>
		<script src="lib/WebVR.js"></script>
		
		<script src="vr.js"></script>

		<script src="lighting.js"></script>
		<script src="helmet.js"></script>

		<script src="mockVrInput.js"></script>

		<script src="face.js"></script>

		<script src="recordingAndPlayback.js"></script>
		<script src="cameraHolder.js"></script>
		
		<script src="text.js"></script>

		<script src="keyboard.js"></script>

		<script src="visibox.js"></script>
		<script src="surroundings.js"></script>
		
		<script src="miscFunctions.js"></script>
		<script src="variables.js"></script>

		<!-- <script src="mouse.js"></script> -->

		<!-- <script src="https://aframe.io/releases/0.9.0/aframe.min.js"></script>
		<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.6.2/aframe/build/aframe-ar.js"></script>
		<a-scene embedded arjs>
		<a-marker preset="hiro">
			<a-box position='0 0.5 0' material='color: yellow;'></a-box>
		</a-marker>
		<a-entity camera></a-entity>
		</a-scene> -->

		<!-- <script src="units/reactionDiffusion.js"></script> -->

		<!-- <script src="units/mobiusTransformations.js"></script> -->

		<script src="units/shaderExperimentation.js"></script>

		<script>
			async function init()
			{
				renderer.setSize( window.innerWidth, window.innerHeight );
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.localClippingEnabled = true;
				document.body.appendChild( renderer.domElement );

				let windowResize = function()
				{
					renderer.setSize( window.innerWidth, window.innerHeight );
					camera.aspect = window.innerWidth / window.innerHeight; //so the sides may be cut off
					camera.updateProjectionMatrix();
				}
				window.addEventListener( 'resize', windowResize)

				initButtons()
				initFaceMaker()
				initLights()
				await initPlaybackAndRecording()				
				initControllerObjects()
				if( chromiumRatherThanChrome )
				{
					initVrInput()
					await initFloorAndSky()
				}

				await initShaderExperimentation()

				renderer.setAnimationLoop( function()
				{
					frameDelta = clock.getDelta()

					if(renderer.vr.enabled === true)
					{
						readHandInput()
					}

					synchronizeToVideoOrCallContingentUpdateFunctionsAndMaybeRecord()
					
					for(let i = 0; i < alwaysUpdateFunctions.length; i++)
					{
						alwaysUpdateFunctions[i]()
					}

					renderer.render( scene, camera );
					frameCount++;
				})
			}
			init()
		</script>
	</body>
</html>