<html>
<head>
    <style>
    	body{
    		margin: 0;
    		overflow: hidden;
    	}
    </style>
</head>
<body>

<canvas id="myCanvas"></canvas>

<script src="three.min.js"></script>

<script type="x-shader/x-vertex" id="vertexShader">
	void main() 
	{
		gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
	}
</script>
<script type="x-shader/x-fragment" id="fragmentShader">
	void main() {
		gl_FragColor = vec4(1.0, 0.0, 0.0, 0.1);
	}
</script>

<script type="x-shader/x-vertex" id="vertexShader2">
	//there was something here and below about opacity but wasn't being used
	attribute float vertexDisplacement;
	varying vec3 vUv;

	void main() 
	{
		vec3 p = position;

		p.x += sin(vertexDisplacement*10.0) * 50.0;
		p.y += cos(vertexDisplacement*10.0) * 50.0;

		vec4 modelViewPosition = modelViewMatrix * vec4(p, 1.0);
		gl_Position = projectionMatrix * modelViewPosition;
		vUv = vec3(gl_Position);
	}
</script>

<script type="x-shader/x-fragment" id="fragmentShader2">
	uniform float delta;
	varying vec3 vUv;

	void main()
	{
		float r = 1.0 + cos(vUv.x * delta);
		float g = 0.5 + sin(delta) * 0.5;
		float b = 0.0;
		
		vec3 rgb = vec3(r, g, b);

		if( vUv.z < 400.0 || 2000.0 < vUv.z)
			discard;
		
		gl_FragColor = vec4(rgb, 1.0);
	}
</script>

<script src="core.js"></script>

<script>
	init();
</script>
</body>
</html>
